#!/bin/bash
# ðŸ“¦ Update system packages (works on both AL2 and AL2023)
sudo yum update -y

# ðŸ Install Python3 and pip (AL2023 compatible)
sudo yum install -y python3 python3-pip

# ðŸ”§ Install Flask using pip3
sudo pip3 install flask

# ðŸ“ Create a directory for the app
mkdir -p /home/ec2-user/hello-world

# ðŸ Create the Flask application
cat > /home/ec2-user/hello-world/app.py <<EOF
from flask import Flask
app = Flask(__name__)

@app.route('/')
def hello():
    return "Hello World from EC2! This is NO ABSTRACTION"

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=80)
EOF

# â–¶ï¸ Run the Flask app in background
cd /home/ec2-user/hello-world
nohup sudo python3 app.py > app.log 2>&1 &
